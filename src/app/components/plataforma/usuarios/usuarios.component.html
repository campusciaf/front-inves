<app-menu></app-menu>

<div class="row mx-0 px-0 content">
    <div class="col-12 p-4">
        <div class="row mb-2">
            <div class="col-xl-6 col-9">
                <h2 class="lh-16">
                    <span class="fs-18 text-semibold">Gesti칩n</span><br>
                    <span class="fs-14 fw-light">Usuarios</span>
                </h2>
            </div>
            <div class="col-xl-6 col-3 pr-4 text-end">
                <button class="btn btn-sm btn-outline-warning px-2 py-0" ><i class="fa-solid fa-play" aria-hidden="true"></i> Tour</button>
            </div>
        </div>

        <div class="row card">
            <div class="col-12 card-header">
                <div class="row">
                    <div class="col-auto">
                        <i class="fa-solid fa-tablet-screen-button avatar bg-light-theme rounded"></i>
            
                    </div>
                    <div class="col-auto align-self-center">
                        <h6 class="fw-normal mb-0 fs-18">Usuarios</h6>
                        <p class="text-secondary small">en plataforma</p>
                    </div>
                    <div class="col-auto ms-auto">
                        <button type="button" class="btn btn-success btn-sm" (click)="open(content)"> <i class="fa-solid fa-plus"></i> Nuevo usuario</button>
                    </div>

                </div>
            </div>
            <div class="col-12 table-responsive p-2">

                <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover" dt-instance="dtInstance">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Acciones</th>
                        <th scope="col">Nick</th>
                        <th scope="col">Correo</th>
                        <th scope="col">Telefono</th>
                        <th scope="col">Estado</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let person of listaUsuarios; index as i">
                        <td scope="row">{{ i + 1 }}</td>
                        <td>
                            <a (click)="editarInformacion(person.id_user)" class="btn btn-primary btn-sm" title="Editar datos">
                                <i class="fa-solid fa-pen"></i>
                            </a>
                            <a (click)="eliminarUsuario(person.id_user)" class="btn btn-danger btn-sm" title="Eliminar Usuario">
                                <i class="fa-solid fa-trash-can"></i>
                            </a>
                        </td>
                        <td>{{ person.user_name }}</td>
                        <td>{{ person.user_email}}</td>
                        <td>{{ person.user_tel }}</td>
                        <td>{{ person.user_state }}</td>
                      </tr>
                    </tbody>
                  </table>
            </div>
        </div>
    </div>
</div> 

<ng-template #content let-c="close" let-d="dismiss" id="closebutton" #closebutton>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Crear una nueva cuenta</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
	</div>
	<div class="modal-body">
		<div class="row align-items-center justify-content-center">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12 text-center text-white">    
      
                <form class="row mb-4 text-start" (ngSubmit)="registro()">
                    <!-- alert messages -->
      
                    <div class="form-group mb-2 position-relative check-valid text-dark is-valid">
                      <div class="input-group input-group-lg">
                          <span class="input-group-text text-theme border-end-0"><i class="fa-regular fa-envelope"></i></span>
                          <div class="form-floating">
                              <input class="form-control border-start-0" placeholder="Email" autofocus="" type="email" name="user_email"  [(ngModel)]="user_email" required >
                              <label>Correo Electr칩nico</label>
                          </div>
                      </div>
                  </div>
      
                  <div class="form-group mb-2 position-relative check-valid text-dark is-valid">
                    <div class="input-group input-group-lg">
                        <span class="input-group-text text-theme border-end-0"><i class="fa-solid fa-key"></i></span>
                        <div class="form-floating">
                          <input class="form-control border-start-0" placeholder="Password" autofocus="" type="password" name="user_password" [(ngModel)]="user_password" required autocomplete="on">
                            <label for="password">Contrase침a</label>
                        </div>
                        <span class="input-group-text text-secondary  border-end-0" id="viewpassword"><i class="fa-regular fa-eye"></i></span>
                    </div>
                </div>
                <div class="form-group mb-2 position-relative check-valid text-dark is-valid">
                  <div class="input-group input-group-lg">
                      <span class="input-group-text text-theme border-end-0"><i class="fa-solid fa-key"></i></span>
                      <div class="form-floating">
                        <input class="form-control border-start-0" placeholder="Repetir password" autofocus="" type="password" name="repeat_password" [(ngModel)]="repeat_password" required autocomplete="on">
                          <label for="repeat_password">Repetir contrase침a</label>
                      </div>
                      <span class="input-group-text text-secondary  border-end-0" id="viewpassword"><i class="fa-regular fa-eye"></i></span>
                  </div>
              </div>
                <button class="btn btn-success" type="submit" ><i class="fa-solid fa-arrow-right"></i> Crear Usuario</button>
      
      
                    <div class="invalid-feedback" style="display: none;">Add .com at last to insert valid data </div>
                </form>
      
      
            </div>
        </div>
	</div>
</ng-template>


